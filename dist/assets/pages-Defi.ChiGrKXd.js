import{_ as a,u as e,r as l,o as s,m as t,f as c,d as n,g as i,w as d,F as u,i as o,e as r,h as f,S as _,p as v,q as b,n as y,j as w,k as m,t as g,s as p,D as h,v as k}from"./index-BYz-dWzL.js";import{_ as C}from"./history.BXkQwhl1.js";import{s as $}from"./walletService.Wy1Vg5c0.js";import"./apiService.Bl7qyh6B.js";const U=a({__name:"Defi",setup(a){const{t:U,locale:D}=e(),F=l(["/static/Home/banner1.png","/static/Home/banner2.png","/static/Home/banner3.png"]),A=l(0),S=a=>{A.value=a.detail.current},x=l(!1),T=l(!1),G=l("USDT"),P=l("deposit"),V=l({isChecking:!1,isBound:!1,walletAddress:null}),B=async()=>{try{V.value.isChecking=!0;const a=await $();return a.success?(V.value.isBound=!0,V.value.walletAddress=a.walletAddress||"logged_in_user",a.skipWalletCheck?console.log("✅ 用户已登录，跳过钱包验证"):(console.log("✅ 钱包验证成功"),k({title:"登录成功",icon:"success",duration:1500})),!0):"WALLET_NOT_BOUND"===a.error?(V.value.isBound=!1,T.value=!0,!1):"CHAIN_ID_MISSING"===a.error?(k({title:a.message||U("wallet.bind.chainIdMissing"),icon:"none",duration:3e3}),!1):(k({title:a.message||U("wallet.bind.checkFailed"),icon:"none",duration:2e3}),!1)}catch(a){return console.error("用户验证失败:",a),k({title:U("wallet.bind.checkFailed"),icon:"none",duration:2e3}),!1}finally{V.value.isChecking=!1}},L=async()=>{await B()&&(P.value="deposit",x.value=!0)},N=async()=>{await B()&&(P.value="withdraw",x.value=!0)},j=async()=>{await B()&&(P.value="finance",x.value=!0)},I=async()=>{await B()&&(P.value="lending",x.value=!0)},O=()=>{x.value=!1},M=()=>{T.value=!1},W=()=>{const a="https://vgau.io/bind-wallet";h({url:`/pages/webview/webview?url=${encodeURIComponent(a)}`}),window.open(a,"_blank"),M()},H=a=>{G.value=a,O(),"deposit"===P.value?"VGAU"===a?h({url:"/views/VGAURecharge"}):"USDT"===a?h({url:"/views/USDTRecharge"}):k({title:`Selected ${a}`,icon:"none",duration:2e3}):"withdraw"===P.value?"VGAU"===a?h({url:"/views/VGAUWithdraw"}):"USDT"===a?h({url:"/views/USDTWithdraw"}):k({title:`${a} withdraw feature coming soon`,icon:"none",duration:2e3}):"finance"===P.value?"MyFinance"===a?h({url:"/views/MyFinance"}):"ProductPurchase"===a?h({url:"/views/ProductPurchase"}):k({title:`${a} finance feature coming soon`,icon:"none",duration:2e3}):"lending"===P.value&&("BorrowOrder"===a?h({url:"/views/BorrowOrder"}):"NewLending"===a?h({url:"/views/NewLending"}):k({title:`${a} lending feature coming soon`,icon:"none",duration:2e3}))},R=()=>{h({url:"/views/History"})};return s((()=>{console.log("DeFi页面加载完成")})),(a,e)=>{const l=f,s=o,h=b,k=_,$=w;return r(),t(u,null,[c(s,{class:"content"},{default:d((()=>[c(s,{class:"header"},{default:d((()=>[c(s,{class:"header-actions"},{default:d((()=>[c(s,{class:"header-btn",onClick:R},{default:d((()=>[c(l,{src:C,class:"header-icon"})])),_:1})])),_:1})])),_:1}),c(s,{class:"main-content"},{default:d((()=>[c(s,{class:"banner-section"},{default:d((()=>[c(k,{class:"banner-swiper","indicator-dots":!1,autoplay:!0,interval:3e3,duration:500,circular:!0,onChange:S},{default:d((()=>[(r(!0),t(u,null,v(F.value,((a,e)=>(r(),n(h,{key:e},{default:d((()=>[c(l,{class:"banner-image",src:a,mode:"aspectFill"},null,8,["src"])])),_:2},1024)))),128))])),_:1}),c(s,{class:"banner-indicators"},{default:d((()=>[(r(!0),t(u,null,v(F.value,((a,e)=>(r(),n(s,{key:e,class:y(["indicator",{active:A.value===e}])},null,8,["class"])))),128))])),_:1})])),_:1}),c(s,{class:"exchange-rate-section"},{default:d((()=>[c(s,{class:"rate-info"},{default:d((()=>[c($,{class:"rate-label"},{default:d((()=>[m(g(a.$t("defi.exchangeRate")),1)])),_:1}),c($,{class:"rate-value"},{default:d((()=>[m("1 VGAU=123.4561 USDT")])),_:1})])),_:1})])),_:1}),c(s,{class:"balance-section"},{default:d((()=>[c($,{class:"balance-label"},{default:d((()=>[m(g(a.$t("defi.balance")),1)])),_:1}),c(s,{class:"balance-divider"}),c(s,{class:"balance-item"},{default:d((()=>[c(s,{class:"balance-header"},{default:d((()=>[c($,{class:"currency-label"},{default:d((()=>[m("VGAU")])),_:1})])),_:1}),c($,{class:"balance-amount"},{default:d((()=>[m("48,456,156")])),_:1})])),_:1}),c(s,{class:"balance-item"},{default:d((()=>[c(s,{class:"balance-header"},{default:d((()=>[c($,{class:"currency-label"},{default:d((()=>[m("USDT")])),_:1})])),_:1}),c($,{class:"balance-amount"},{default:d((()=>[m("111.41")])),_:1})])),_:1}),c(s,{class:"balance-divider"})])),_:1}),c(s,{class:"yield-section"},{default:d((()=>[c(s,{class:"yield-card"},{default:d((()=>[c(s,{class:"yield-info"},{default:d((()=>[c(s,{class:"yield-item"},{default:d((()=>[c($,{class:"yield-label"},{default:d((()=>[m(g(a.$t("defi.currentApr")),1)])),_:1}),c($,{class:"yield-value"},{default:d((()=>[m("1%")])),_:1})])),_:1}),c(s,{class:"yield-divider"}),c(s,{class:"yield-item"},{default:d((()=>[c($,{class:"yield-label"},{default:d((()=>[m(g(a.$t("defi.pending")),1)])),_:1}),c($,{class:"yield-value"},{default:d((()=>[m("1231.00")])),_:1})])),_:1})])),_:1}),c(s,{class:"claim-button"},{default:d((()=>[c($,{class:"claim-text"},{default:d((()=>[m(g(a.$t("defi.claim")),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(s,{class:"action-section"},{default:d((()=>[c(s,{class:"action-btn primary",onClick:L},{default:d((()=>[c($,{class:"btn-text"},{default:d((()=>[m(g(a.$t("defi.deposit")),1)])),_:1})])),_:1}),c(s,{class:"action-btn secondary",onClick:N},{default:d((()=>[c($,{class:"btn-text"},{default:d((()=>[m(g(a.$t("defi.withdraw")),1)])),_:1})])),_:1}),c(s,{class:"action-buttons"},{default:d((()=>[c(s,{class:"action-btn outline",onClick:j},{default:d((()=>[c($,{class:"btn-text"},{default:d((()=>[m(g(a.$t("defi.finance")),1)])),_:1})])),_:1}),c(s,{class:"action-btn outline",onClick:I},{default:d((()=>[c($,{class:"btn-text"},{default:d((()=>[m(g(a.$t("defi.lending")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),x.value?(r(),n(s,{key:0,class:"deposit-modal",onClick:O},{default:d((()=>[c(s,{class:"modal-overlay"}),c(s,{class:"modal-content",onClick:e[6]||(e[6]=p((()=>{}),["stop"]))},{default:d((()=>[c(s,{class:"modal-header"},{default:d((()=>[c(s,{class:"modal-handle"}),c($,{class:"modal-title"},{default:d((()=>[m(g("deposit"===P.value?"Deposit":"withdraw"===P.value?"Withdraw":"finance"===P.value?"Finance":"lending"===P.value?"Lending":"Action"),1)])),_:1})])),_:1}),c(s,{class:"currency-section"},{default:d((()=>["finance"===P.value?(r(),t(u,{key:0},[c(s,{class:y(["currency-option",{active:"MyFinance"===G.value}]),onClick:e[0]||(e[0]=a=>H("MyFinance"))},{default:d((()=>[c(s,{class:"currency-icon"},{default:d((()=>[c(l,{class:"finance-icon",src:"/static/DiFi/licai.png",mode:"aspectFit"})])),_:1}),c($,{class:"currency-name"},{default:d((()=>[m(g(a.$t("defi.myFinance")),1)])),_:1})])),_:1},8,["class"]),c(s,{class:y(["currency-option",{active:"ProductPurchase"===G.value}]),onClick:e[1]||(e[1]=a=>H("ProductPurchase"))},{default:d((()=>[c(s,{class:"currency-icon"},{default:d((()=>[c(l,{class:"purchase-icon",src:"/static/DiFi/shengou.png",mode:"aspectFit"})])),_:1}),c($,{class:"currency-name"},{default:d((()=>[m(g(a.$t("defi.productPurchase")),1)])),_:1})])),_:1},8,["class"])],64)):"lending"===P.value?(r(),t(u,{key:1},[c(s,{class:y(["currency-option",{active:"BorrowOrder"===G.value}]),onClick:e[2]||(e[2]=a=>H("BorrowOrder"))},{default:d((()=>[c(s,{class:"currency-icon"},{default:d((()=>[c(l,{class:"borrow-icon",src:"/static/DiFi/jiebi.png",mode:"aspectFit"})])),_:1}),c($,{class:"currency-name"},{default:d((()=>[m(g(a.$t("defi.borrowOrder")),1)])),_:1})])),_:1},8,["class"]),c(s,{class:y(["currency-option",{active:"NewLending"===G.value}]),onClick:e[3]||(e[3]=a=>H("NewLending"))},{default:d((()=>[c(s,{class:"currency-icon"},{default:d((()=>[c(l,{class:"lending-icon",src:"/static/DiFi/jiedai.png",mode:"aspectFit"})])),_:1}),c($,{class:"currency-name"},{default:d((()=>[m(g(a.$t("defi.newLending")),1)])),_:1})])),_:1},8,["class"])],64)):(r(),t(u,{key:2},[c(s,{class:y(["currency-option",{active:"USDT"===G.value}]),onClick:e[4]||(e[4]=a=>H("USDT"))},{default:d((()=>[c(s,{class:"currency-icon"},{default:d((()=>[c(s,{class:"usdt-icon"},{default:d((()=>[c(s,{class:"usdt-diamond"}),c(s,{class:"usdt-symbol"},{default:d((()=>[m("T")])),_:1})])),_:1})])),_:1}),c($,{class:"currency-name"},{default:d((()=>[m("USDT")])),_:1})])),_:1},8,["class"]),c(s,{class:y(["currency-option",{active:"VGAU"===G.value}]),onClick:e[5]||(e[5]=a=>H("VGAU"))},{default:d((()=>[c(s,{class:"currency-icon"},{default:d((()=>[c(s,{class:"vgau-icon"},{default:d((()=>[c(s,{class:"vgau-circle"}),c(s,{class:"vgau-symbol"},{default:d((()=>[m("G")])),_:1})])),_:1})])),_:1}),c($,{class:"currency-name"},{default:d((()=>[m("VGAU")])),_:1})])),_:1},8,["class"])],64))])),_:1})])),_:1})])),_:1})):i("",!0),T.value?(r(),n(s,{key:1,class:"wallet-bind-modal",onClick:M},{default:d((()=>[c(s,{class:"modal-overlay"}),c(s,{class:"modal-content",onClick:e[7]||(e[7]=p((()=>{}),["stop"]))},{default:d((()=>[c(s,{class:"modal-header"},{default:d((()=>[c(s,{class:"modal-handle"}),c($,{class:"modal-title"},{default:d((()=>[m(g(a.$t("wallet.bind.title")),1)])),_:1})])),_:1}),c(s,{class:"bind-content"},{default:d((()=>[c(s,{class:"bind-icon"},{default:d((()=>[c($,{class:"icon-text"},{default:d((()=>[m("🔗")])),_:1})])),_:1}),c($,{class:"bind-title"},{default:d((()=>[m(g(a.$t("wallet.bind.subtitle")),1)])),_:1}),c($,{class:"bind-description"},{default:d((()=>[m(g(a.$t("wallet.bind.description")),1)])),_:1}),c(s,{class:"bind-actions"},{default:d((()=>[c(s,{class:"bind-btn primary",onClick:W},{default:d((()=>[c($,{class:"btn-text"},{default:d((()=>[m(g(a.$t("wallet.bind.visitWebsite")),1)])),_:1})])),_:1}),c(s,{class:"bind-btn secondary",onClick:M},{default:d((()=>[c($,{class:"btn-text"},{default:d((()=>[m(g(a.$t("wallet.bind.cancel")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):i("",!0)])),_:1}),V.value.isChecking?(r(),n(s,{key:0,class:"loading-overlay"},{default:d((()=>[c(s,{class:"loading-content"},{default:d((()=>[c($,{class:"loading-text"},{default:d((()=>[m(g(a.$t("wallet.bind.checking")),1)])),_:1})])),_:1})])),_:1})):i("",!0)],64)}}},[["__scopeId","data-v-56464b10"]]);export{U as default};
