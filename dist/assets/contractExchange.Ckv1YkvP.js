import{w as e,U as f,V as a}from"./BEP20USDT.4l3CktaQ.js";const b={_format:"hh-sol-artifact-1",contractName:"VGAUExchange",sourceName:"contracts/VGAUExchange.sol",abi:[{inputs:[{internalType:"address",name:"accessControlContract_",type:"address"},{internalType:"address",name:"userKycManagerContract_",type:"address"},{internalType:"address",name:"xauUsdChainLinkDataFeed_",type:"address"},{internalType:"address",name:"usdtTokenContract_",type:"address"},{internalType:"address",name:"vgauTokenContract_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"AdminDepositedUSDT",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"AdminDepositedVGAU",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"admin",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"AdminWithdrewUSDT",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"admin",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"AdminWithdrewVGAU",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"uint256",name:"oldThreshold",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newThreshold",type:"uint256"}],name:"KycThresholdUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"exchanger",type:"address"},{indexed:!1,internalType:"uint256",name:"usdtAmount",type:"uint256"},{indexed:!1,internalType:"int256",name:"chainlinkPrice",type:"int256"},{indexed:!1,internalType:"uint80",name:"roundId",type:"uint80"},{indexed:!1,internalType:"uint256",name:"vgauAmount",type:"uint256"}],name:"UsdtToVgauExchanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"exchanger",type:"address"},{indexed:!1,internalType:"uint256",name:"vgauAmount",type:"uint256"},{indexed:!1,internalType:"int256",name:"chainlinkPrice",type:"int256"},{indexed:!1,internalType:"uint80",name:"roundId",type:"uint80"},{indexed:!1,internalType:"uint256",name:"usdtAmount",type:"uint256"}],name:"VgauToUsdtExchanged",type:"event"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"adminDepositUSDT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"adminDepositVGAU",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"adminWithdrawUSDT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"adminWithdrawVGAU",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"vgauAmount",type:"uint256"}],name:"exchangeUsdtToExactVgau",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"vgauAmount",type:"uint256"}],name:"exchangeVgauToUsdt",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getContractUSDTBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getContractVGAUBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLatestValidXAUPrice",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"price",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"vgauAmount",type:"uint256"},{internalType:"uint256",name:"pricePerOunce",type:"uint256"}],name:"getRequiredUSDTByVGAU",outputs:[{internalType:"uint256",name:"usdtAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"kycThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauseExchange",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpauseExchange",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newThreshold",type:"uint256"}],name:"updateKycThreshold",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdtDecimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"usdtToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userTotalExchangeUsdtAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"vgauDecimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"vgauToken",outputs:[{internalType:"contract VGAUToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"xauUsdDataFeed",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"xauUsdPriceDecimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"}],bytecode:"0x608060405234801561000f575f5ffd5b50604051611f9a380380611f9a83398101604081905261002e916104c2565b6001600160a01b0385166100af5760405162461bcd60e51b815260206004820152603360248201527f412076616c696420416363657373436f6e74726f6c20636f6e7472616374206160448201527f646472657373206d757374206265207365742e0000000000000000000000000060648201526084015b60405180910390fd5b6001600160a01b03841661012b5760405162461bcd60e51b815260206004820152603460248201527f412076616c696420557365724b79634d616e6167657220636f6e74726163742060448201527f61646472657373206d757374206265207365742e00000000000000000000000060648201526084016100a6565b6001600160a01b0383166101a75760405162461bcd60e51b815260206004820152603960248201527f412076616c6964205841552f555344206461746120736f7572636520636f6e7460448201527f726163742061646472657373206d757374206265207365742e0000000000000060648201526084016100a6565b6001600160a01b0382166102165760405162461bcd60e51b815260206004820152603060248201527f412076616c6964205553445420746f6b656e20636f6e7472616374206164647260448201526f32b9b99036bab9ba1031329039b2ba1760811b60648201526084016100a6565b6001600160a01b0381166102855760405162461bcd60e51b815260206004820152603060248201527f412076616c6964205647415520746f6b656e20636f6e7472616374206164647260448201526f32b9b99036bab9ba1031329039b2ba1760811b60648201526084016100a6565b5f8054610100600160a81b0319166101006001600160a01b038681169190910291909117909155600180546001600160a01b031990811688841617909155600280548216878416179055600480548216858416908117825560038054909316938516939093179091556040805163313ce56760e01b8152905163313ce567928281019260209291908290030181865afa158015610324573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103489190610523565b6004805460ff92909216600160a01b0260ff60a01b199092169190911781556003546040805163313ce56760e01b815290516001600160a01b039092169263313ce5679282820192602092908290030181865afa1580156103ab573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103cf9190610523565b600460156101000a81548160ff021916908360ff1602179055505f60019054906101000a90046001600160a01b03166001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610439573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061045d9190610523565b6004805460ff60b01b1916600160b01b60ff93841602179081905561048c91600160a01b90910416600a610643565b61049990620186a0610651565b600555506106689350505050565b80516001600160a01b03811681146104bd575f5ffd5b919050565b5f5f5f5f5f60a086880312156104d6575f5ffd5b6104df866104a7565b94506104ed602087016104a7565b93506104fb604087016104a7565b9250610509606087016104a7565b9150610517608087016104a7565b90509295509295909350565b5f60208284031215610533575f5ffd5b815160ff81168114610543575f5ffd5b9392505050565b634e487b7160e01b5f52601160045260245ffd5b6001815b60018411156105995780850481111561057d5761057d61054a565b600184161561058b57908102905b60019390931c928002610562565b935093915050565b5f826105af5750600161063d565b816105bb57505f61063d565b81600181146105d157600281146105db576105f7565b600191505061063d565b60ff8411156105ec576105ec61054a565b50506001821b61063d565b5060208310610133831016604e8410600b841016171561061a575081810a61063d565b6106265f19848461055e565b805f19048211156106395761063961054a565b0290505b92915050565b5f61054360ff8416836105a1565b808202811582820484141761063d5761063d61054a565b611925806106755f395ff3fe608060405234801561000f575f5ffd5b5060043610610148575f3560e01c806370ed9e95116100bf578063a98ad46c11610079578063a98ad46c146102db578063aa5f9565146102ee578063b187bd2614610301578063c8f760401461030e578063f641e42f14610316578063f6e5305e14610329575f5ffd5b806370ed9e951461027257806382543b32146102855780638c11a99e146102995780638dea040e146102ac5780638f08aefd146102b4578063950ea06e146102c7575f5ffd5b80634cea0947116101105780634cea0947146101f457806359e5153f1461021a5780635c975abb1461022d57806360a3bdd9146102435780636b33a8fc1461024c5780636fe3bc081461025f575f5ffd5b8063017023581461014c57806331401060146101865780633307f6f8146101b557806341e57603146101e25780634ba8728f146101ea575b5f5ffd5b61015461033c565b6040805169ffffffffffffffffffff909516855260208501939093529183015260608201526080015b60405180910390f35b5f5461019d9061010090046001600160a01b031681565b6040516001600160a01b03909116815260200161017d565b6101d46101c33660046115ac565b60076020525f908152604090205481565b60405190815260200161017d565b6101d4610483565b6101f26104f3565b005b60045461020890600160a81b900460ff1681565b60405160ff909116815260200161017d565b60035461019d906001600160a01b031681565b5f5460ff165b604051901515815260200161017d565b6101d460055481565b6101f261025a3660046115cc565b6105d8565b6101f261026d3660046115e3565b610863565b6101f26102803660046115cc565b610ac0565b60045461020890600160a01b900460ff1681565b6101f26102a73660046115e3565b610bfe565b6101f2610e4e565b6101f26102c23660046115cc565b610f30565b60045461020890600160b01b900460ff1681565b60045461019d906001600160a01b031681565b6101f26102fc3660046115cc565b611017565b6006546102339060ff1681565b6101d461112e565b6101f26103243660046115cc565b611163565b6101d461033736600461160b565b61129a565b5f5f5f5f5f60019054906101000a90046001600160a01b03166001600160a01b031663feaf968c6040518163ffffffff1660e01b815260040160a060405180830381865afa158015610390573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103b49190611644565b50929650909450925090505f83136104135760405162461bcd60e51b815260206004820152601c60248201527f496e76616c69642070726963652066726f6d20436861696e6c696e6b0000000060448201526064015b60405180910390fd5b6102d061042082426116a6565b111561047d5760405162461bcd60e51b815260206004820152602660248201527f5072696365206461746120697320746f6f206f6c6420286d6178203132206d696044820152656e757465732960d01b606482015260840161040a565b90919293565b6003546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a08231906024015b602060405180830381865afa1580156104ca573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104ee91906116b9565b905090565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610543573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061056791906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b1580156105ab575f5ffd5b505afa1580156105bd573d5f5f3e3d5ffd5b505050506105c96113aa565b6006805460ff19166001179055565b6105e0611403565b5f81116105ff5760405162461bcd60e51b815260040161040a906116d0565b5f5f61060961033c565b5050915091505f61061a848361129a565b90505f811161063b5760405162461bcd60e51b815260040161040a90611712565b600554335f9081526007602052604090205461065890839061175f565b10806106d757506002546001600160a01b031663b08ab245336040516001600160e01b031960e084901b1681526001600160a01b039091166004820152602401602060405180830381865afa1580156106b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106d79190611772565b6107b25760405162461bcd60e51b815260206004820152609460248201527f5768656e2074686520616d6f756e74206f662055534454207573656420746f2060448201527f65786368616e676520564741552065786365656473207468652073706563696660648201527f69656420616d6f756e742c20612077616c6c65742061646472657373206d757360848201527f7420626520626f756e6420616e64204b59432061757468656e7469636174696f60a482015273371036bab9ba103132903832b93337b936b2b21760611b60c482015260e40161040a565b335f90815260076020526040812080548392906107d090849061175f565b90915550506004546107ed906001600160a01b0316333084611428565b600354610804906001600160a01b03163386611495565b604080518281526020810184905269ffffffffffffffffffff8516918101919091526060810185905233907fceb5ee67d7e880913baf0620cd0643ecad5a0a34f5159fd7146a8a78b0d92fd6906080015b60405180910390a250505050565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa1580156108b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108d791906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b15801561091b575f5ffd5b505afa15801561092d573d5f5f3e3d5ffd5b5050506001600160a01b03831690506109885760405162461bcd60e51b815260206004820152601f60248201527f43616e6e6f7420776974686472617720746f207a65726f206164647265737300604482015260640161040a565b5f81116109a75760405162461bcd60e51b815260040161040a90611791565b600480546040516370a0823160e01b8152309281019290925282916001600160a01b03909116906370a0823190602401602060405180830381865afa1580156109f2573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610a1691906116b9565b1015610a645760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420555344542062616c616e636500000000000000604482015260640161040a565b600454610a7b906001600160a01b03168383611495565b6040518181526001600160a01b0383169033907f48c13154429094e9c132a4014673bd4decf39410ffa1f4797d29cf4a50ee9ae8906020015b60405180910390a35050565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610b10573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b3491906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b158015610b78575f5ffd5b505afa158015610b8a573d5f5f3e3d5ffd5b505050505f8111610bad5760405162461bcd60e51b815260040161040a90611791565b600354610bc5906001600160a01b0316333084611428565b60405181815233907f07f48cd6a6e4aad6ce95262244bbe7b60cd04c50df8aeb7fd9ccbda4a5dc8501906020015b60405180910390a250565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610c4e573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610c7291906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b158015610cb6575f5ffd5b505afa158015610cc8573d5f5f3e3d5ffd5b5050506001600160a01b0383169050610d235760405162461bcd60e51b815260206004820152601f60248201527f43616e6e6f7420776974686472617720746f207a65726f206164647265737300604482015260640161040a565b5f8111610d425760405162461bcd60e51b815260040161040a90611791565b6003546040516370a0823160e01b815230600482015282916001600160a01b0316906370a0823190602401602060405180830381865afa158015610d88573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610dac91906116b9565b1015610dfa5760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420564741552062616c616e636500000000000000604482015260640161040a565b600354610e11906001600160a01b03168383611495565b6040518181526001600160a01b0383169033907fee394217861b17018b2d5bf8d7e338cd0f5d4c9effda4faa054b7f6e0dcb4d8a90602001610ab4565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610e9e573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610ec291906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b158015610f06575f5ffd5b505afa158015610f18573d5f5f3e3d5ffd5b50505050610f246114cb565b6006805460ff19169055565b610f38611403565b5f8111610f575760405162461bcd60e51b815260040161040a906116d0565b5f5f610f6161033c565b5050915091505f610f72848361129a565b90505f8111610f935760405162461bcd60e51b815260040161040a90611712565b600354610fab906001600160a01b0316333087611428565b600454610fc2906001600160a01b03163383611495565b604080518581526020810184905269ffffffffffffffffffff8516918101919091526060810182905233907f91b572c2fde486bffffdce872822b814a1297d606ae081fd9b86ee69c73d636490608001610855565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015611067573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061108b91906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b1580156110cf575f5ffd5b505afa1580156110e1573d5f5f3e3d5ffd5b5050600580549084905560408051828152602081018690529193503392507fe658f1e87d530860d95b6f3b5de40e76f52edeb687b9e2e9221230f9b8589f67910160405180910390a25050565b600480546040516370a0823160e01b815230928101929092525f916001600160a01b03909116906370a08231906024016104af565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa1580156111b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906111d791906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b15801561121b575f5ffd5b505afa15801561122d573d5f5f3e3d5ffd5b505050505f81116112505760405162461bcd60e51b815260040161040a90611791565b600454611268906001600160a01b0316333084611428565b60405181815233907fba84330ff98bf6f5d5ae96446cb79ad85be54e0699e1a1889813afd08640fb8690602001610bf3565b5f5f83116112ba5760405162461bcd60e51b815260040161040a906116d0565b5f82116113095760405162461bcd60e51b815260206004820152601c60248201527f5072696365206d7573742062652067726561746572207468616e203000000000604482015260640161040a565b6004545f906127109061132790600160a01b900460ff16600a6118ab565b61133185876118b9565b61133b91906118b9565b61134591906118b9565b6004549091505f906204befb9061136790600160a81b900460ff16600a6118ab565b60045461137f90600160b01b900460ff16600a6118ab565b61138991906118b9565b61139391906118b9565b905061139f81836118d0565b925050505b92915050565b6113b2611403565b5f805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586113e63390565b6040516001600160a01b03909116815260200160405180910390a1565b5f5460ff16156114265760405163d93c066560e01b815260040160405180910390fd5b565b6040516001600160a01b03848116602483015283811660448301526064820183905261148f9186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050611503565b50505050565b6040516001600160a01b038381166024830152604482018390526114c691859182169063a9059cbb9060640161145d565b505050565b6114d361156f565b5f805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa336113e6565b5f5f60205f8451602086015f885af180611522576040513d5f823e3d81fd5b50505f513d91508115611539578060011415611546565b6001600160a01b0384163b155b1561148f57604051635274afe760e01b81526001600160a01b038516600482015260240161040a565b5f5460ff1661142657604051638dfc202b60e01b815260040160405180910390fd5b80356001600160a01b03811681146115a7575f5ffd5b919050565b5f602082840312156115bc575f5ffd5b6115c582611591565b9392505050565b5f602082840312156115dc575f5ffd5b5035919050565b5f5f604083850312156115f4575f5ffd5b6115fd83611591565b946020939093013593505050565b5f5f6040838503121561161c575f5ffd5b50508035926020909101359150565b805169ffffffffffffffffffff811681146115a7575f5ffd5b5f5f5f5f5f60a08688031215611658575f5ffd5b6116618661162b565b602087015160408801516060890151929750909550935091506116866080870161162b565b90509295509295909350565b634e487b7160e01b5f52601160045260245ffd5b818103818111156113a4576113a4611692565b5f602082840312156116c9575f5ffd5b5051919050565b60208082526022908201527f5647415520616d6f756e74206d7573742062652067726561746572207468616e604082015261020360f41b606082015260800190565b6020808252602d908201527f43616c63756c61746564205553445420616d6f756e74206d757374206265206760408201526c0726561746572207468616e203609c1b606082015260800190565b808201808211156113a4576113a4611692565b5f60208284031215611782575f5ffd5b815180151581146115c5575f5ffd5b6020808252601d908201527f416d6f756e74206d7573742062652067726561746572207468616e2030000000604082015260600190565b6001815b6001841115611803578085048111156117e7576117e7611692565b60018416156117f557908102905b60019390931c9280026117cc565b935093915050565b5f82611819575060016113a4565b8161182557505f6113a4565b816001811461183b576002811461184557611861565b60019150506113a4565b60ff84111561185657611856611692565b50506001821b6113a4565b5060208310610133831016604e8410600b8410161715611884575081810a6113a4565b6118905f1984846117c8565b805f19048211156118a3576118a3611692565b029392505050565b5f6115c560ff84168361180b565b80820281158282048414176113a4576113a4611692565b5f826118ea57634e487b7160e01b5f52601260045260245ffd5b50049056fea2646970667358221220905e0920c4e0c64c944386dd800aadc6046ad1630409daba7bbead9a72eed57264736f6c634300081c0033",deployedBytecode:"0x608060405234801561000f575f5ffd5b5060043610610148575f3560e01c806370ed9e95116100bf578063a98ad46c11610079578063a98ad46c146102db578063aa5f9565146102ee578063b187bd2614610301578063c8f760401461030e578063f641e42f14610316578063f6e5305e14610329575f5ffd5b806370ed9e951461027257806382543b32146102855780638c11a99e146102995780638dea040e146102ac5780638f08aefd146102b4578063950ea06e146102c7575f5ffd5b80634cea0947116101105780634cea0947146101f457806359e5153f1461021a5780635c975abb1461022d57806360a3bdd9146102435780636b33a8fc1461024c5780636fe3bc081461025f575f5ffd5b8063017023581461014c57806331401060146101865780633307f6f8146101b557806341e57603146101e25780634ba8728f146101ea575b5f5ffd5b61015461033c565b6040805169ffffffffffffffffffff909516855260208501939093529183015260608201526080015b60405180910390f35b5f5461019d9061010090046001600160a01b031681565b6040516001600160a01b03909116815260200161017d565b6101d46101c33660046115ac565b60076020525f908152604090205481565b60405190815260200161017d565b6101d4610483565b6101f26104f3565b005b60045461020890600160a81b900460ff1681565b60405160ff909116815260200161017d565b60035461019d906001600160a01b031681565b5f5460ff165b604051901515815260200161017d565b6101d460055481565b6101f261025a3660046115cc565b6105d8565b6101f261026d3660046115e3565b610863565b6101f26102803660046115cc565b610ac0565b60045461020890600160a01b900460ff1681565b6101f26102a73660046115e3565b610bfe565b6101f2610e4e565b6101f26102c23660046115cc565b610f30565b60045461020890600160b01b900460ff1681565b60045461019d906001600160a01b031681565b6101f26102fc3660046115cc565b611017565b6006546102339060ff1681565b6101d461112e565b6101f26103243660046115cc565b611163565b6101d461033736600461160b565b61129a565b5f5f5f5f5f60019054906101000a90046001600160a01b03166001600160a01b031663feaf968c6040518163ffffffff1660e01b815260040160a060405180830381865afa158015610390573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103b49190611644565b50929650909450925090505f83136104135760405162461bcd60e51b815260206004820152601c60248201527f496e76616c69642070726963652066726f6d20436861696e6c696e6b0000000060448201526064015b60405180910390fd5b6102d061042082426116a6565b111561047d5760405162461bcd60e51b815260206004820152602660248201527f5072696365206461746120697320746f6f206f6c6420286d6178203132206d696044820152656e757465732960d01b606482015260840161040a565b90919293565b6003546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a08231906024015b602060405180830381865afa1580156104ca573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104ee91906116b9565b905090565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610543573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061056791906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b1580156105ab575f5ffd5b505afa1580156105bd573d5f5f3e3d5ffd5b505050506105c96113aa565b6006805460ff19166001179055565b6105e0611403565b5f81116105ff5760405162461bcd60e51b815260040161040a906116d0565b5f5f61060961033c565b5050915091505f61061a848361129a565b90505f811161063b5760405162461bcd60e51b815260040161040a90611712565b600554335f9081526007602052604090205461065890839061175f565b10806106d757506002546001600160a01b031663b08ab245336040516001600160e01b031960e084901b1681526001600160a01b039091166004820152602401602060405180830381865afa1580156106b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106d79190611772565b6107b25760405162461bcd60e51b815260206004820152609460248201527f5768656e2074686520616d6f756e74206f662055534454207573656420746f2060448201527f65786368616e676520564741552065786365656473207468652073706563696660648201527f69656420616d6f756e742c20612077616c6c65742061646472657373206d757360848201527f7420626520626f756e6420616e64204b59432061757468656e7469636174696f60a482015273371036bab9ba103132903832b93337b936b2b21760611b60c482015260e40161040a565b335f90815260076020526040812080548392906107d090849061175f565b90915550506004546107ed906001600160a01b0316333084611428565b600354610804906001600160a01b03163386611495565b604080518281526020810184905269ffffffffffffffffffff8516918101919091526060810185905233907fceb5ee67d7e880913baf0620cd0643ecad5a0a34f5159fd7146a8a78b0d92fd6906080015b60405180910390a250505050565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa1580156108b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108d791906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b15801561091b575f5ffd5b505afa15801561092d573d5f5f3e3d5ffd5b5050506001600160a01b03831690506109885760405162461bcd60e51b815260206004820152601f60248201527f43616e6e6f7420776974686472617720746f207a65726f206164647265737300604482015260640161040a565b5f81116109a75760405162461bcd60e51b815260040161040a90611791565b600480546040516370a0823160e01b8152309281019290925282916001600160a01b03909116906370a0823190602401602060405180830381865afa1580156109f2573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610a1691906116b9565b1015610a645760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420555344542062616c616e636500000000000000604482015260640161040a565b600454610a7b906001600160a01b03168383611495565b6040518181526001600160a01b0383169033907f48c13154429094e9c132a4014673bd4decf39410ffa1f4797d29cf4a50ee9ae8906020015b60405180910390a35050565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610b10573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b3491906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b158015610b78575f5ffd5b505afa158015610b8a573d5f5f3e3d5ffd5b505050505f8111610bad5760405162461bcd60e51b815260040161040a90611791565b600354610bc5906001600160a01b0316333084611428565b60405181815233907f07f48cd6a6e4aad6ce95262244bbe7b60cd04c50df8aeb7fd9ccbda4a5dc8501906020015b60405180910390a250565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610c4e573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610c7291906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b158015610cb6575f5ffd5b505afa158015610cc8573d5f5f3e3d5ffd5b5050506001600160a01b0383169050610d235760405162461bcd60e51b815260206004820152601f60248201527f43616e6e6f7420776974686472617720746f207a65726f206164647265737300604482015260640161040a565b5f8111610d425760405162461bcd60e51b815260040161040a90611791565b6003546040516370a0823160e01b815230600482015282916001600160a01b0316906370a0823190602401602060405180830381865afa158015610d88573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610dac91906116b9565b1015610dfa5760405162461bcd60e51b815260206004820152601960248201527f496e73756666696369656e7420564741552062616c616e636500000000000000604482015260640161040a565b600354610e11906001600160a01b03168383611495565b6040518181526001600160a01b0383169033907fee394217861b17018b2d5bf8d7e338cd0f5d4c9effda4faa054b7f6e0dcb4d8a90602001610ab4565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015610e9e573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610ec291906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b158015610f06575f5ffd5b505afa158015610f18573d5f5f3e3d5ffd5b50505050610f246114cb565b6006805460ff19169055565b610f38611403565b5f8111610f575760405162461bcd60e51b815260040161040a906116d0565b5f5f610f6161033c565b5050915091505f610f72848361129a565b90505f8111610f935760405162461bcd60e51b815260040161040a90611712565b600354610fab906001600160a01b0316333087611428565b600454610fc2906001600160a01b03163383611495565b604080518581526020810184905269ffffffffffffffffffff8516918101919091526060810182905233907f91b572c2fde486bffffdce872822b814a1297d606ae081fd9b86ee69c73d636490608001610855565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa158015611067573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061108b91906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b1580156110cf575f5ffd5b505afa1580156110e1573d5f5f3e3d5ffd5b5050600580549084905560408051828152602081018690529193503392507fe658f1e87d530860d95b6f3b5de40e76f52edeb687b9e2e9221230f9b8589f67910160405180910390a25050565b600480546040516370a0823160e01b815230928101929092525f916001600160a01b03909116906370a08231906024016104af565b60015460408051634ac0c18360e01b815290516001600160a01b039092169163d09a20c5918391634ac0c183916004808201926020929091908290030181865afa1580156111b3573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906111d791906116b9565b336040516001600160e01b031960e085901b16815260048101929092526001600160a01b031660248201526044015f6040518083038186803b15801561121b575f5ffd5b505afa15801561122d573d5f5f3e3d5ffd5b505050505f81116112505760405162461bcd60e51b815260040161040a90611791565b600454611268906001600160a01b0316333084611428565b60405181815233907fba84330ff98bf6f5d5ae96446cb79ad85be54e0699e1a1889813afd08640fb8690602001610bf3565b5f5f83116112ba5760405162461bcd60e51b815260040161040a906116d0565b5f82116113095760405162461bcd60e51b815260206004820152601c60248201527f5072696365206d7573742062652067726561746572207468616e203000000000604482015260640161040a565b6004545f906127109061132790600160a01b900460ff16600a6118ab565b61133185876118b9565b61133b91906118b9565b61134591906118b9565b6004549091505f906204befb9061136790600160a81b900460ff16600a6118ab565b60045461137f90600160b01b900460ff16600a6118ab565b61138991906118b9565b61139391906118b9565b905061139f81836118d0565b925050505b92915050565b6113b2611403565b5f805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586113e63390565b6040516001600160a01b03909116815260200160405180910390a1565b5f5460ff16156114265760405163d93c066560e01b815260040160405180910390fd5b565b6040516001600160a01b03848116602483015283811660448301526064820183905261148f9186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050611503565b50505050565b6040516001600160a01b038381166024830152604482018390526114c691859182169063a9059cbb9060640161145d565b505050565b6114d361156f565b5f805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa336113e6565b5f5f60205f8451602086015f885af180611522576040513d5f823e3d81fd5b50505f513d91508115611539578060011415611546565b6001600160a01b0384163b155b1561148f57604051635274afe760e01b81526001600160a01b038516600482015260240161040a565b5f5460ff1661142657604051638dfc202b60e01b815260040160405180910390fd5b80356001600160a01b03811681146115a7575f5ffd5b919050565b5f602082840312156115bc575f5ffd5b6115c582611591565b9392505050565b5f602082840312156115dc575f5ffd5b5035919050565b5f5f604083850312156115f4575f5ffd5b6115fd83611591565b946020939093013593505050565b5f5f6040838503121561161c575f5ffd5b50508035926020909101359150565b805169ffffffffffffffffffff811681146115a7575f5ffd5b5f5f5f5f5f60a08688031215611658575f5ffd5b6116618661162b565b602087015160408801516060890151929750909550935091506116866080870161162b565b90509295509295909350565b634e487b7160e01b5f52601160045260245ffd5b818103818111156113a4576113a4611692565b5f602082840312156116c9575f5ffd5b5051919050565b60208082526022908201527f5647415520616d6f756e74206d7573742062652067726561746572207468616e604082015261020360f41b606082015260800190565b6020808252602d908201527f43616c63756c61746564205553445420616d6f756e74206d757374206265206760408201526c0726561746572207468616e203609c1b606082015260800190565b808201808211156113a4576113a4611692565b5f60208284031215611782575f5ffd5b815180151581146115c5575f5ffd5b6020808252601d908201527f416d6f756e74206d7573742062652067726561746572207468616e2030000000604082015260600190565b6001815b6001841115611803578085048111156117e7576117e7611692565b60018416156117f557908102905b60019390931c9280026117cc565b935093915050565b5f82611819575060016113a4565b8161182557505f6113a4565b816001811461183b576002811461184557611861565b60019150506113a4565b60ff84111561185657611856611692565b50506001821b6113a4565b5060208310610133831016604e8410600b8410161715611884575081810a6113a4565b6118905f1984846117c8565b805f19048211156118a3576118a3611692565b029392505050565b5f6115c560ff84168361180b565b80820281158282048414176113a4576113a4611692565b5f826118ea57634e487b7160e01b5f52601260045260245ffd5b50049056fea2646970667358221220905e0920c4e0c64c944386dd800aadc6046ad1630409daba7bbead9a72eed57264736f6c634300081c0033",linkReferences:{},deployedLinkReferences:{}},d="0xbEe820f5ACA3a90f21af24a6573F69E3D3232609",t="0xf6307065A593840680765889Fc16461bC7781231",n="0x75579C9FB3A30e7c3CaBB5c74E4A6c0DB1e2054d";const c=new class{constructor(){this.isInitialized=!1}async init(){try{if(this.isInitialized)return!0;console.log("🔧 初始化合约交换服务...");if(!(await e.init()))throw new Error("Web3初始化失败");if(!(await e.connectWallet()).success)throw new Error("钱包连接失败");return await e.loadContract(d,b.abi,"VGAUExchange"),await e.loadContract(t,f,"USDTToken"),await e.loadContract(n,a.abi,"VGAUToken"),this.isInitialized=!0,console.log("✅ 合约交换服务初始化成功"),!0}catch(c){throw console.error("❌ 合约交换服务初始化失败:",c),c}}async getUSDTAllowance(){try{await this.init();const f=await e.callContractMethod("USDTToken","allowance",e.currentAccount,d);return console.log("📊 USDT授权额度:",f),f}catch(f){throw console.error("❌ 获取USDT授权额度失败:",f),f}}async getVGAUAllowance(){try{await this.init();const f=await e.callContractMethod("VGAUToken","allowance",e.currentAccount,d);return console.log("📊 VGAU授权额度:",f),f}catch(f){throw console.error("❌ 获取VGAU授权额度失败:",f),f}}async approveUSDT(f){try{await this.init(),console.log("🔐 授权USDT:",f);const a=await e.sendTransaction("USDTToken","approve",{from:e.currentAccount},d,f);return console.log("✅ USDT授权成功:",a.transactionHash),a}catch(a){throw console.error("❌ USDT授权失败:",a),a}}async approveVGAU(f){try{await this.init(),console.log("🔐 授权VGAU:",f);const a=await e.sendTransaction("VGAUToken","approve",{from:e.currentAccount},d,f);return console.log("✅ VGAU授权成功:",a.transactionHash),a}catch(a){throw console.error("❌ VGAU授权失败:",a),a}}async exchangeUsdtToVgau(f){try{await this.init(),console.log("💱 开始USDT兑换VGAU..."),console.log("目标VGAU数量:",f);const a=parseInt(f.toString(),10).toString();console.log("VGAU数量(单位):",a),console.log("🔍 计算所需USDT...");const b=await e.callContractMethod("VGAUExchange","getRequiredUSDTByVGAU",a,await this.getLatestGoldPrice());console.log("所需USDT(wei):",b),console.log("🔍 检查USDT授权额度...");const d=await this.getUSDTAllowance();console.log("当前授权额度:",d),"0"===d?(console.log("✅ 授权额度为0，直接授权所需金额..."),await this.approveUSDT(b),await new Promise((e=>setTimeout(e,3e3)))):(console.log("🔄 授权额度不为0，需要先清零..."),await this.approveUSDT("0"),await new Promise((e=>setTimeout(e,3e3))),console.log("🔐 重新授权所需USDT..."),await this.approveUSDT(b),await new Promise((e=>setTimeout(e,3e3)))),console.log("💱 执行兑换交易...");const t=await e.sendTransaction("VGAUExchange","exchangeUsdtToExactVgau",{from:e.currentAccount},a);return console.log("✅ USDT兑换VGAU成功:",t.transactionHash),t}catch(a){if(console.error("❌ USDT兑换VGAU失败:",a),a.message&&a.message.includes("wallet address must be bound and KYC")){const e=new Error("请先完成钱包绑定和KYC认证后再进行大额兑换");throw e.errorType="KYC_REQUIRED",e}throw a}}async exchangeVgauToUsdt(f){try{await this.init(),console.log("💱 开始VGAU赎回USDT..."),console.log("VGAU数量:",f);const a=parseInt(f.toString(),10).toString();console.log("VGAU数量(单位):",a),console.log("🔍 检查VGAU授权额度...");const b=await this.getVGAUAllowance();console.log("当前授权额度:",b),"0"===b?(console.log("✅ 授权额度为0，直接授权所需金额..."),await this.approveVGAU(a),await new Promise((e=>setTimeout(e,3e3)))):(console.log("🔄 授权额度不为0，需要先清零..."),await this.approveVGAU("0"),await new Promise((e=>setTimeout(e,3e3))),console.log("🔐 重新授权VGAU..."),await this.approveVGAU(a),await new Promise((e=>setTimeout(e,3e3)))),console.log("💱 执行赎回交易...");const d=await e.sendTransaction("VGAUExchange","exchangeVgauToUsdt",{from:e.currentAccount},a);return console.log("✅ VGAU赎回USDT成功:",d.transactionHash),d}catch(a){if(console.error("❌ VGAU赎回USDT失败:",a),a.message&&a.message.includes("wallet address must be bound and KYC")){const e=new Error("请先完成钱包绑定和KYC认证后再进行大额赎回");throw e.errorType="KYC_REQUIRED",e}throw a}}async getLatestGoldPrice(){try{await this.init();return(await e.callContractMethod("VGAUExchange","getLatestValidXAUPrice")).price}catch(f){throw console.error("❌ 获取黄金价格失败:",f),f}}async getRequiredUSDT(f){try{await this.init();const a=parseInt(f.toString(),10).toString(),b=await this.getLatestGoldPrice(),d=await e.callContractMethod("VGAUExchange","getRequiredUSDTByVGAU",a,b),t=await e.callContractMethod("VGAUExchange","usdtDecimals");return{raw:d,formatted:parseFloat(d)/Math.pow(10,parseInt(t))}}catch(a){throw console.error("❌ 计算所需USDT失败:",a),a}}};export{b as V,c};
