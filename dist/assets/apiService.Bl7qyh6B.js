var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);import{Q as s,v as i,J as o}from"./index-BYz-dWzL.js";const n={development:{baseURL:"http://localhost:5173/api",proxy:{target:"http://192.168.1.100:8080",changeOrigin:!0,pathRewrite:{"^/api":"/api"}}},production:{baseURL:"https://verigold.ai/api",proxy:null}}.production.baseURL,a={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",REGISTER:"/auth/register",PROFILE:"/auth/profile",ME:"/auth/me"},WALLET_AUTH:{LOGIN_CHALLENGE:"/wallet/login/challenge",LOGIN_VERIFY:"/wallet/login/confirm"},WALLET:{BALANCE:"/wallet/balance",TRANSACTIONS:"/wallet/transactions",WITHDRAW:"/wallet/withdraw",DEPOSIT:"/wallet/deposit"},USER_FUNDS:{BALANCES:"/user-funds/balances"},LOAN:{CONFIG:"/loan/config",ORDERS:"/loan/orders"},USER:{PROFILE:"/user/profile",UPDATE:"/user/update",KYC:"/user/kyc"},TOTP:{SETUP:"/totp/setup",VERIFY:"/totp/verify",DISABLE:"/totp/disable"},FILE:{UPLOAD:"/file/upload",DOWNLOAD:"/file/download",PREVIEW:"/file/preview"},INVITE:{CODE:"/invite/code",BIND:"/invite/bind",RELATIONS:"/invite/relations",MY_CODE:"/invite/my-code"},STAKE:{PRODUCTS:"/stake/products",ORDERS:"/stake/orders",STATISTICS:"/stake/statistics",REDEEM:"/stake/orders/{orderId}/redeem"}},r={timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0},d={successCodes:[200,201,204],errorHandler:t=>{console.error("API Error:",t);let e="en";try{e=s("locale")||"en"}catch(a){console.error("Failed to get locale from storage:",a)}const o={zh:{401:"è¯·å…ˆç™»å½•",403:"æƒé™ä¸è¶³",404:"èµ„æºä¸å­˜åœ¨",500:"æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",network:"ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥",default:"è¯·æ±‚å¤±è´¥"},en:{401:"Please login first",403:"Permission denied",404:"Resource not found",500:"Server error, please try again later",network:"Network error, please check your connection",default:"Request failed"}},n=o[e]||o.en;if(t.response){const{status:e,data:s}=t.response;let o=n.default;switch(e){case 401:o=n[401];break;case 403:o=n[403];break;case 404:o=n[404];break;case 500:o=n[500];break;default:o=(null==s?void 0:s.message)||n.default}i({title:o,icon:"none",duration:2e3})}else t.request?i({title:n.network,icon:"none",duration:2e3}):i({title:n.default,icon:"none",duration:2e3});return Promise.reject(t)}};const h=new class{constructor(){e(this,"auth",{login:t=>this.post(this.endpoints.AUTH.LOGIN,t),logout:()=>this.post(this.endpoints.AUTH.LOGOUT),register:t=>this.post(this.endpoints.AUTH.REGISTER,t),getProfile:()=>this.get(this.endpoints.AUTH.PROFILE),getMe:()=>this.get(this.endpoints.AUTH.ME)}),e(this,"walletAuth",{createLoginChallenge:(t,e)=>{if(!t)throw new Error("é’±åŒ…åœ°å€ä¸èƒ½ä¸ºç©º");if(!e)throw new Error("é“¾IDä¸èƒ½ä¸ºç©ºï¼ŒchainIdæ˜¯å¿…éœ€çš„å‚æ•°");if("number"!=typeof e||e<=0||!Number.isInteger(e))throw new Error("é“¾IDæ ¼å¼æ— æ•ˆï¼Œå¿…é¡»æ˜¯10è¿›åˆ¶æ•°å­—");return this.post(this.endpoints.WALLET_AUTH.LOGIN_CHALLENGE,{walletAddress:t,chainId:e})},verifyLoginSignature:t=>this.post(this.endpoints.WALLET_AUTH.LOGIN_VERIFY,t)}),e(this,"wallet",{getBalance:()=>this.get(this.endpoints.WALLET.BALANCE),getTransactions:t=>this.get(this.endpoints.WALLET.TRANSACTIONS,t),withdraw:t=>this.post(this.endpoints.WALLET.WITHDRAW,t),deposit:t=>this.post(this.endpoints.WALLET.DEPOSIT,t)}),e(this,"user",{getProfile:()=>this.get(this.endpoints.USER.PROFILE),updateProfile:t=>this.put(this.endpoints.USER.UPDATE,t),getKyc:()=>this.get(this.endpoints.USER.KYC),submitKyc:t=>this.post(this.endpoints.USER.KYC,t)}),e(this,"totp",{setup:()=>this.get(this.endpoints.TOTP.SETUP),verify:t=>this.post(this.endpoints.TOTP.VERIFY,{code:t}),disable:t=>this.post(this.endpoints.TOTP.DISABLE,{code:t})}),e(this,"file",{upload:t=>this.post(this.endpoints.FILE.UPLOAD,t),download:t=>this.get(this.endpoints.FILE.DOWNLOAD,{fileId:t}),preview:t=>this.get(this.endpoints.FILE.PREVIEW,{fileId:t})}),e(this,"invite",{getCode:()=>this.get(this.endpoints.INVITE.CODE),getMyCode:()=>this.get(this.endpoints.INVITE.MY_CODE),bind:t=>this.post(this.endpoints.INVITE.BIND,{code:t}),getRelations:t=>this.get(this.endpoints.INVITE.RELATIONS,t)}),e(this,"stake",{getProducts:()=>this.get(this.endpoints.STAKE.PRODUCTS),createOrder:t=>this.post(this.endpoints.STAKE.ORDERS,t),getOrders:()=>this.get(this.endpoints.STAKE.ORDERS),getStatistics:()=>this.get(this.endpoints.STAKE.STATISTICS),redeemOrder:t=>this.post(this.endpoints.STAKE.REDEEM.replace("{orderId}",t))}),e(this,"userFunds",{getBalances:()=>this.get(this.endpoints.USER_FUNDS.BALANCES)}),e(this,"loan",{getConfig:()=>this.get(this.endpoints.LOAN.CONFIG),createOrder:t=>this.post(this.endpoints.LOAN.ORDERS,t)}),this.baseURL=n,this.endpoints=a}async request(t,e={}){var s;const i={...r,...e,url:this.baseURL+t};"GET"===i.method&&(i.data={...i.data,_t:Date.now()}),console.log("ğŸŒ APIè¯·æ±‚é…ç½®:",{method:i.method||"GET",url:i.url,data:i.data,headers:i.headers,timeout:i.timeout});try{console.log("ğŸ“¤ å¼€å§‹å‘é€è¯·æ±‚...");const t=await o(i);if(console.log("ğŸ“¡ APIå“åº”è¯¦æƒ…:",{statusCode:t.statusCode,data:t.data,header:t.header}),d.successCodes.includes(t.statusCode))return t.data;throw console.error("âŒ å“åº”çŠ¶æ€ç é”™è¯¯:",t.statusCode,t.data),new Error((null==(s=t.data)?void 0:s.message)||`Request failed with status ${t.statusCode}`)}catch(n){throw console.error("ğŸ’¥ APIè¯·æ±‚å¼‚å¸¸:",{message:n.message,stack:n.stack,config:i}),d.errorHandler(n),n}}async get(t,e={}){return this.request(t,{method:"GET",data:e})}async post(t,e={}){return this.request(t,{method:"POST",data:e})}async put(t,e={}){return this.request(t,{method:"PUT",data:e})}async delete(t){return this.request(t,{method:"DELETE"})}},l=h.auth,p=h.walletAuth;h.wallet,h.user,h.totp,h.file;const E=h.invite,u=h.stake,c=h.userFunds,T=h.loan;export{l as a,E as i,T as l,u as s,c as u,p as w};
