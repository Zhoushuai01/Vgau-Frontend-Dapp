import{_ as a,u as e,r as t,o as l,m as s,f as n,d as i,g as o,w as c,F as d,v as r,i as u,e as f,h as v,j as _,k as p,t as m,l as w,n as b,p as k,s as y,M as h,C}from"./index-BYz-dWzL.js";import{_ as g}from"./back.BFYz81iB.js";import{_ as x}from"./Details.UZgRiVWG.js";import{f as B}from"./addressUtils.4RzFZbUF.js";import{i as D}from"./apiService.Bl7qyh6B.js";const P=a({__name:"Invitation",setup(a){const{t:P}=e(),R=t(""),j=t(""),A=t(!1),I=t(!1),O=t([{id:"001",wallet:"0x7eCfbF2D6DEa2371ea8f237c056B024dA4Bc87af",type:P("components.invitation.directReferral"),rewards:"2"},{id:"002",wallet:"0x8fDgcC3E7Fb3482fb8f248c057B025eB5Bc98bBg",type:P("components.invitation.indirectReferral"),rewards:"0.2"}]),U=()=>{h()},F=()=>{!I.value&&R.value?C({data:R.value,success:()=>{r({title:P("components.invitation.linkCopied"),icon:"success",duration:2e3})},fail:()=>{r({title:"复制失败",icon:"none",duration:2e3})}}):r({title:"邀请链接未准备好",icon:"none",duration:2e3})},$=()=>{A.value=!0},E=()=>{A.value=!1};return l((()=>{(async()=>{I.value=!0;try{const a=await D.getMyCode();console.log("我的邀请码响应:",a),a&&a.data&&a.data.inviteCode?(j.value=a.data.inviteCode,R.value=`http://localhost:3000/register?inviter=${j.value}`):(j.value="ABC123",R.value=`http://localhost:3000/register?inviter=${j.value}`)}catch(a){console.error("获取邀请码失败:",a),j.value="ABC123",R.value=`http://localhost:3000/register?inviter=${j.value}`,r({title:"获取邀请码失败",icon:"none",duration:2e3})}finally{I.value=!1}})()})),(a,e)=>{const t=v,l=u,r=_;return f(),s(d,null,[n(l,{class:"invitation-container"},{default:c((()=>[n(l,{class:"page-header"},{default:c((()=>[n(l,{class:"back-button",onClick:U},{default:c((()=>[n(l,{class:"back-icon"},{default:c((()=>[n(t,{src:g,class:"back-arrow"})])),_:1})])),_:1}),n(r,{class:"title-text"},{default:c((()=>[p(m(w(P)("components.invitation.invitation")),1)])),_:1})])),_:1}),n(l,{class:"reward-card"},{default:c((()=>[n(l,{class:"reward-info"},{default:c((()=>[n(r,{class:"reward-value"},{default:c((()=>[p(m(w(P)("components.invitation.invitationRewards")),1)])),_:1}),n(r,{class:"reward-label"},{default:c((()=>[p(m(w(P)("components.invitation.invitationRewards")),1)])),_:1})])),_:1})])),_:1}),n(l,{class:"stats-section"},{default:c((()=>[n(l,{class:"stat-card"},{default:c((()=>[n(r,{class:"stat-value"},{default:c((()=>[p(m(w(P)("components.invitation.numberOfInvitedPeople")),1)])),_:1}),n(r,{class:"stat-label"},{default:c((()=>[p(m(w(P)("components.invitation.numberOfInvitedPeople")),1)])),_:1})])),_:1}),n(l,{class:"stat-card"},{default:c((()=>[n(r,{class:"stat-value"},{default:c((()=>[p(m(w(P)("components.invitation.numberOfDirectPushPersonnel")),1)])),_:1}),n(r,{class:"stat-label"},{default:c((()=>[p(m(w(P)("components.invitation.numberOfDirectPushPersonnel")),1)])),_:1})])),_:1})])),_:1}),n(l,{class:"invite-link-card"},{default:c((()=>[n(l,{class:"link-info"},{default:c((()=>[n(r,{class:"link-label"},{default:c((()=>[p(m(w(P)("components.invitation.invitationLink")),1)])),_:1}),I.value?(f(),i(r,{key:0,class:"link-url loading-text"},{default:c((()=>[p("加载中...")])),_:1})):(f(),i(r,{key:1,class:"link-url"},{default:c((()=>[p(m(R.value),1)])),_:1}))])),_:1}),n(l,{class:b(["copy-btn",{disabled:I.value||!R.value}]),onClick:F},{default:c((()=>[n(r,{class:"copy-text"},{default:c((()=>[p(m(w(P)("common.copy")),1)])),_:1})])),_:1},8,["class"])])),_:1}),n(l,{class:"details-card"},{default:c((()=>[n(l,{class:"details-header"},{default:c((()=>[n(r,{class:"details-title"},{default:c((()=>[p(m(w(P)("components.invitation.invitationRewardDetails")),1)])),_:1}),n(l,{class:"details-icon",onClick:$},{default:c((()=>[n(t,{src:x,class:"icon-img"})])),_:1})])),_:1}),n(l,{class:"table-header"},{default:c((()=>[n(r,{class:"header-id"},{default:c((()=>[p(m(w(P)("components.invitation.id")),1)])),_:1}),n(r,{class:"header-wallet"},{default:c((()=>[p(m(w(P)("components.invitation.walletAddr")),1)])),_:1}),n(r,{class:"header-type"},{default:c((()=>[p(m(w(P)("components.invitation.type")),1)])),_:1}),n(r,{class:"header-rewards"},{default:c((()=>[p(m(w(P)("components.invitation.rewards")),1)])),_:1})])),_:1}),n(l,{class:"table-content"},{default:c((()=>[(f(!0),s(d,null,k(O.value,((a,e)=>(f(),i(l,{class:"table-row",key:e},{default:c((()=>[n(r,{class:"row-id"},{default:c((()=>[p(m(a.id),1)])),_:2},1024),n(r,{class:"row-wallet"},{default:c((()=>[p(m(w(B)(a.wallet)),1)])),_:2},1024),n(r,{class:"row-type"},{default:c((()=>[p(m(a.type),1)])),_:2},1024),n(r,{class:"row-rewards"},{default:c((()=>[p(m(a.rewards),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),n(l,{class:"bottom-tip"},{default:c((()=>[n(r,{class:"tip-text"},{default:c((()=>[p(m(w(P)("components.invitation.allContentLoaded")),1)])),_:1})])),_:1})])),_:1})])),_:1}),A.value?(f(),i(l,{key:0,class:"rule-modal-overlay",onClick:E},{default:c((()=>[n(l,{class:"rule-modal-content",onClick:e[0]||(e[0]=y((()=>{}),["stop"]))},{default:c((()=>[n(l,{class:"rule-modal-header"},{default:c((()=>[n(r,{class:"rule-modal-title"},{default:c((()=>[p(m(w(P)("components.invitation.ruleDetails")),1)])),_:1}),n(l,{class:"rule-close-button",onClick:E},{default:c((()=>[n(r,{class:"rule-close-icon"},{default:c((()=>[p("×")])),_:1})])),_:1})])),_:1}),n(l,{class:"rule-modal-body"},{default:c((()=>[n(r,{class:"rule-content"},{default:c((()=>[p(m(w(P)("components.invitation.successfullyReferUserThroughKYC")),1)])),_:1}),n(l,{class:"rule-list"},{default:c((()=>[n(r,{class:"rule-item"},{default:c((()=>[p(m(w(P)("components.invitation.directReferral"))+"--"+m(w(P)("components.invitation.rewardsPerUser")),1)])),_:1}),n(r,{class:"rule-item"},{default:c((()=>[p(m(w(P)("components.invitation.indirectReferral"))+"--"+m(w(P)("components.invitation.rewardsPerUser")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):o("",!0)],64)}}},[["__scopeId","data-v-b3ed5829"]]);export{P as default};
