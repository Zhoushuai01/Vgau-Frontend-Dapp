import{_ as e,u as a,r as l,N as s,o as t,d as r,w as c,i as n,e as o,f as u,g as i,h as d,j as f,k as g,t as m,l as h,I as v,n as _,s as x,M as p,v as b,z as y,A as E,y as k}from"./index-BYz-dWzL.js";import{_ as T}from"./back.BFYz81iB.js";import{c as U}from"./contractExchange.Ckv1YkvP.js";import"./BEP20USDT.4l3CktaQ.js";const w=e({__name:"Exchange",setup(e){const{t:w}=a(),C=()=>{var e;try{return((null==(e=k.global.locale)?void 0:e.value)||"en").startsWith("zh")?"æ­£åœ¨å…Œæ›...":"Exchanging..."}catch(a){return"Exchanging..."}},S=()=>{var e;try{return((null==(e=k.global.locale)?void 0:e.value)||"en").startsWith("zh")?"éŒ¯èª¤":"Error"}catch(a){return"Error"}},D=()=>{var e;try{return((null==(e=k.global.locale)?void 0:e.value)||"en").startsWith("zh")?"ç¢ºèª":"Confirm"}catch(a){return"Confirm"}},V=e=>{var a;try{const l=((null==(a=k.global.locale)?void 0:a.value)||"en").startsWith("zh");if("KYC_REQUIRED"===e.errorType)return e.message;if(e.message){if(e.message.includes("ä½™é¢ä¸è¶³")||e.message.includes("Insufficient balance"))return e.message;if(e.message.includes("ç”¨æˆ·å–æ¶ˆ")||e.message.includes("User rejected"))return l?"ç”¨æˆ¶å–æ¶ˆæ“ä½œ":"User Cancelled Operation";if(e.message.includes("ç½‘ç»œ")||e.message.includes("network"))return l?"ç¶²çµ¡éŒ¯èª¤":"Network Error";if(e.message.includes("Gas")||e.message.includes("gas"))return l?"Gasè²»ç”¨ä¸è¶³":"Insufficient Gas Fee"}return l?"å…Œæ›å¤±æ•—":"Exchange Failed"}catch(l){return"Exchange Failed"}},j=()=>{var e;try{return((null==(e=k.global.locale)?void 0:e.value)||"en").startsWith("zh")?"å…Œæ›æˆåŠŸ":"Exchange Successful"}catch(a){return"Exchange Successful"}},z=()=>{var e;try{return((null==(e=k.global.locale)?void 0:e.value)||"en").startsWith("zh")?"è«‹è¼¸å…¥æœ‰æ•ˆé‡‘é¡":"Please Enter Valid Amount"}catch(a){return"Please Enter Valid Amount"}},F=l(""),A=l(!1),G=l(120),W=l(!1),q=l({title:"",message:"",confirmText:""}),I=l("0"),P=async()=>{if(!F.value||parseFloat(F.value)<=0)b({title:z(),icon:"none",duration:2e3});else if(!A.value)try{A.value=!0,y({title:C(),mask:!0}),console.log("ðŸš€ å¼€å§‹USDTå…‘æ¢VGAUæµç¨‹..."),console.log("å…‘æ¢æ•°é‡:",F.value,"VGAU");const e=await U.exchangeUsdtToVgau(F.value);E(),console.log("âœ… å…‘æ¢æˆåŠŸ:",e),b({title:j(),icon:"success",duration:3e3}),F.value="",setTimeout((()=>{p()}),2e3)}catch(e){console.error("âŒ å…‘æ¢å¤±è´¥:",e),E(),q.value={title:S(),message:V(e),confirmText:D()},W.value=!0}finally{A.value=!1}},N=()=>{p()},R=()=>{W.value=!1};return s(F,(()=>{(async()=>{if(F.value&&!isNaN(F.value))try{const e=parseFloat(F.value);console.log("ðŸ” è®¡ç®—æ‰€éœ€USDT:",e);const a=await U.getRequiredUSDT(e);console.log("ðŸ“Š è®¡ç®—ç»“æžœ:",a),I.value=a.formatted.toFixed(2)}catch(e){console.error("è®¡ç®—æ‰€éœ€USDTå¤±è´¥:",e),I.value="0"}else I.value="0"})()}),{immediate:!1}),t((async()=>{try{await(async()=>{try{const e=await U.getLatestGoldPrice();G.value=parseFloat(e)/Math.pow(10,8),console.log("èŽ·å–åˆ°æœ€æ–°é»„é‡‘ä»·æ ¼:",G.value)}catch(e){console.error("èŽ·å–ä»·æ ¼å¤±è´¥:",e),G.value=120}})()}catch(e){console.error("åˆå§‹åŒ–ä»·æ ¼å¤±è´¥:",e)}})),(e,a)=>{const l=d,s=n,t=f,p=v;return o(),r(s,{class:"exchange-container"},{default:c((()=>[u(s,{class:"page-header"},{default:c((()=>[u(s,{class:"back-button",onClick:N},{default:c((()=>[u(s,{class:"back-icon"},{default:c((()=>[u(l,{src:T,class:"back-arrow"})])),_:1})])),_:1}),u(t,{class:"title-text"},{default:c((()=>[g(m(h(w)("components.exchange.title")),1)])),_:1})])),_:1}),u(s,{class:"brand-section"},{default:c((()=>[u(s,{class:"brand-info"},{default:c((()=>[u(t,{class:"brand-title"},{default:c((()=>[g(m(h(w)("components.exchange.brandTitle")),1)])),_:1}),u(t,{class:"brand-subtitle"},{default:c((()=>[g(m(h(w)("components.exchange.brandSubtitle")),1)])),_:1}),u(t,{class:"brand-description"},{default:c((()=>[g(m(h(w)("components.exchange.brandDescription")),1)])),_:1})])),_:1}),u(s,{class:"rate-info"},{default:c((()=>[u(s,{class:"rate-info-content"},{default:c((()=>[u(t,{class:"rate-text"},{default:c((()=>[g(m(h(w)("components.exchange.rateText")),1)])),_:1})])),_:1}),u(s,{class:"divider-line"})])),_:1})])),_:1}),u(s,{class:"exchange-section"},{default:c((()=>[u(s,{class:"currency-selector"},{default:c((()=>[u(t,{class:"currency-text"},{default:c((()=>[g(m(h(w)("components.exchange.currency1")),1)])),_:1}),u(s,{class:"exchange-icon"},{default:c((()=>[u(t,{class:"arrow-icon"},{default:c((()=>[g("â†’")])),_:1})])),_:1}),u(t,{class:"currency-text"},{default:c((()=>[g(m(h(w)("components.exchange.currency2")),1)])),_:1})])),_:1}),u(s,{class:"input-container"},{default:c((()=>[u(s,{class:"input-field"},{default:c((()=>[u(p,{class:"input-text",type:"number",modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),placeholder:h(w)("components.exchange.exchangeAmountPlaceholder"),"placeholder-class":"placeholder-text","adjust-position":!1,"hold-keyboard":!0,"cursor-spacing":200},null,8,["modelValue","placeholder"]),u(t,{class:"currency-label"},{default:c((()=>[g(m(h(w)("components.exchange.currency2")),1)])),_:1})])),_:1})])),_:1}),u(s,{class:"required-info"},{default:c((()=>[u(t,{class:"required-label"},{default:c((()=>[g(m(h(w)("components.exchange.requiredUSDT")),1)])),_:1}),u(t,{class:"required-value"},{default:c((()=>[g(m(I.value),1)])),_:1})])),_:1})])),_:1}),u(s,{class:_(["confirm-btn",{loading:A.value}]),onClick:P},{default:c((()=>[u(t,{class:"confirm-text"},{default:c((()=>[g(m(A.value?C():h(w)("components.exchange.confirmExchange")),1)])),_:1})])),_:1},8,["class"]),W.value?(o(),r(s,{key:0,class:"custom-error-modal",onClick:R},{default:c((()=>[u(s,{class:"error-modal-content",onClick:a[1]||(a[1]=x((()=>{}),["stop"]))},{default:c((()=>[u(s,{class:"error-header"},{default:c((()=>[u(t,{class:"error-title"},{default:c((()=>[g(m(q.value.title),1)])),_:1})])),_:1}),u(s,{class:"error-body"},{default:c((()=>[u(t,{class:"error-message"},{default:c((()=>[g(m(q.value.message),1)])),_:1})])),_:1}),u(s,{class:"error-footer"},{default:c((()=>[u(s,{class:"error-confirm-btn",onClick:R},{default:c((()=>[u(t,{class:"error-confirm-text"},{default:c((()=>[g(m(q.value.confirmText),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):i("",!0)])),_:1})}}},[["__scopeId","data-v-e2460b17"]]);export{w as default};
